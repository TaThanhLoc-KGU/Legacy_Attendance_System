2025-08-20 00:20:50 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 3, active threads = 1, queued tasks = 0, completed tasks = 2]
2025-08-20 00:50:50 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 4, active threads = 1, queued tasks = 0, completed tasks = 3]
2025-08-20 01:07:47 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-08-20 01:07:47 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-08-20 01:07:48 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-08-20 01:07:48 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6be74655]]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6be74655]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6be74655]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-08-20 01:07:48 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 01:07:48 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-20 01:07:48 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-08-20 01:07:48 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-08-20 12:09:01 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-08-20 12:09:01 [restartedMain] INFO  c.t.f.FaceAttendanceApplication - Starting FaceAttendanceApplication using Java 24 with PID 33636 (D:\LuanVan\face-attendance\target\classes started by thanh in D:\LuanVan\face-attendance)
2025-08-20 12:09:01 [restartedMain] DEBUG c.t.f.FaceAttendanceApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-08-20 12:09:01 [restartedMain] INFO  c.t.f.FaceAttendanceApplication - No active profile set, falling back to 1 default profile: "default"
2025-08-20 12:09:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-08-20 12:09:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-08-20 12:09:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-20 12:09:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 205 ms. Found 21 JPA repository interfaces.
2025-08-20 12:09:08 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - 🔧 Registering custom error pages for Face Attendance System
2025-08-20 12:09:08 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - ✅ Error pages registered successfully
2025-08-20 12:09:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-08-20 12:09:08 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-20 12:09:08 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-08-20 12:09:08 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-08-20 12:09:09 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-08-20 12:09:09 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6674 ms
2025-08-20 12:09:09 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-08-20 12:09:09 [restartedMain] DEBUG o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-08-20 12:09:10 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-20 12:09:10 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-08-20 12:09:10 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-20 12:09:11 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-20 12:09:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-08-20 12:09:12 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@35c8535
2025-08-20 12:09:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-08-20 12:09:12 [restartedMain] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-08-20 12:09:12 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-20 12:09:12 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-20 12:09:17 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-20 12:09:18 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table sinhvien 
       modify column ma_sv varchar(20) not null
2025-08-20 12:09:19 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table sinhvien 
       modify column ma_sv varchar(20) not null" via JDBC [Cannot change column 'ma_sv': used in a foreign key constraint 'FK2gqolxaphl30pjr7l2dbs8x8w' of table 'face_attendance_legacy.taikhoan']
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table sinhvien 
       modify column ma_sv varchar(20) not null" via JDBC [Cannot change column 'ma_sv': used in a foreign key constraint 'FK2gqolxaphl30pjr7l2dbs8x8w' of table 'face_attendance_legacy.taikhoan']
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tathanhloc.faceattendance.FaceAttendanceApplication.main(FaceAttendanceApplication.java:22)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLException: Cannot change column 'ma_sv': used in a foreign key constraint 'FK2gqolxaphl30pjr7l2dbs8x8w' of table 'face_attendance_legacy.taikhoan'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 40 common frames omitted
2025-08-20 12:09:19 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table sinhvien 
       modify column embedding varchar(255)
2025-08-20 12:09:19 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table sinhvien 
       modify column embedding varchar(255)" via JDBC [Data truncation: Data too long for column 'embedding' at row 1]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table sinhvien 
       modify column embedding varchar(255)" via JDBC [Data truncation: Data too long for column 'embedding' at row 1]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tathanhloc.faceattendance.FaceAttendanceApplication.main(FaceAttendanceApplication.java:22)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'embedding' at row 1
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:96)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 40 common frames omitted
2025-08-20 12:09:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-20 12:09:21 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-20 12:09:39 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-08-20 12:09:39 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-08-20 12:09:43 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-20 12:09:44 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 362 mappings in 'requestMappingHandlerMapping'
2025-08-20 12:09:44 [restartedMain] INFO  c.t.f.S.PythonFeatureExtractionService - Python wrapper script created: .\extract_wrapper.py
2025-08-20 12:09:44 [restartedMain] INFO  c.t.f.S.PythonFeatureExtractionService - Bash script created: .\run_extraction.sh
2025-08-20 12:09:44 [restartedMain] INFO  c.t.f.S.PythonFeatureExtractionService - Python scripts initialized successfully at: .
2025-08-20 12:09:45 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /admin-ws/**] in 'stompWebSocketHandlerMapping'
2025-08-20 12:09:45 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-08-20 12:09:45 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - 🔧 Configuring view controllers
2025-08-20 12:09:45 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - ✅ View controllers configured successfully
2025-08-20 12:09:46 [restartedMain] DEBUG o.s.w.s.c.a.WebMvcConfigurer - Default resource handling disabled
2025-08-20 12:09:46 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - 🔧 Configuring static resource handlers
2025-08-20 12:09:46 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - ✅ Static resource handlers configured successfully
2025-08-20 12:09:46 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - 🔧 Configuring static resource handlers
2025-08-20 12:09:46 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - ✅ Added SRC streams handler: file:///D:/LuanVan/face-attendance/src/main/resources/static/streams
2025-08-20 12:09:46 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - ✅ Added CLASSPATH streams handler
2025-08-20 12:09:46 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - ✅ All resource handlers configured successfully
2025-08-20 12:09:46 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/static/**, /css/**, /js/**, /images/**, /favicon.ico, /streams/**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-08-20 12:09:49 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-08-20 12:09:52 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.AdminDashboardController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.AttendanceReportController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.AuthController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.CameraController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.CustomErrorController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.DangKyHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.DiemDanhController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.ErrorPageController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.FlaskIntegrationController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.GiangVienController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.HocKyController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.HocKyNamHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.HomeController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.KhoaController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.KhoaHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LecturerApiController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LecturerDashboardController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LichHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LopController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LopHocPhanController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.MonHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.NamHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.NganhController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.NganhMonHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.PhongHocController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.PythonApiController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.PythonFeatureExtractionController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.RealtimeController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.ROIController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.SinhVienController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StreamController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StreamPageController:
	
2025-08-20 12:09:53 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StudentAttendanceController:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StudentDashboardController:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.SwaggerController:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.SystemLogController:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.TaiKhoanController:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.WebSocketController:
	{[MESSAGE],[/system-status]}: handleSystemStatusRequest()
	{[MESSAGE],[/attendance-update]}: handleAttendanceUpdate(DiemDanhDTO)
	{[MESSAGE],[/camera-status]}: handleCameraStatus(CameraStatusEventDTO)
	{[MESSAGE],[/roi-update]}: handleROIUpdate(ROIUpdateEventDTO)
	{[MESSAGE],[/face-detection]}: handleFaceDetection(FaceDetectionDTO)
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-08-20 12:09:54 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-08-20 12:09:55 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-08-20 12:09:56 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-08-20 12:09:59 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-08-20 12:10:00 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-08-20 12:10:00 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-08-20 12:10:00 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-08-20 12:10:00 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@34368aa]
2025-08-20 12:10:00 [restartedMain] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@34368aa]
2025-08-20 12:10:00 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@34368aa]]
2025-08-20 12:10:00 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-08-20 12:10:00 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:10:00 [restartedMain] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:10:00 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-20 12:10:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-08-20 12:10:00 [restartedMain] INFO  c.t.f.FaceAttendanceApplication - Started FaceAttendanceApplication in 59.623 seconds (process running for 61.646)
2025-08-20 12:10:00 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        tk1_0.id,
        tk1_0.created_at,
        tk1_0.ma_gv,
        tk1_0.is_active,
        tk1_0.password_hash,
        tk1_0.ma_sv,
        tk1_0.username,
        tk1_0.vai_tro 
    from
        taikhoan tk1_0 
    where
        tk1_0.username=?
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@62c8a2db
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@5ac3d71c
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-08-20 12:10:02 [RMI TCP Connection(1)-172.16.71.31] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 16 ms
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-08-20 12:10:25 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-08-20 12:10:25 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@34368aa]]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@34368aa]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@34368aa]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-08-20 12:10:25 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-08-20 12:10:25 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-08-20 12:16:41 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-08-20 12:16:41 [restartedMain] INFO  c.t.f.FaceAttendanceApplication - Starting FaceAttendanceApplication using Java 24 with PID 31392 (D:\LuanVan\face-attendance\target\classes started by thanh in D:\LuanVan\face-attendance)
2025-08-20 12:16:41 [restartedMain] DEBUG c.t.f.FaceAttendanceApplication - Running with Spring Boot v3.4.4, Spring v6.2.5
2025-08-20 12:16:41 [restartedMain] INFO  c.t.f.FaceAttendanceApplication - No active profile set, falling back to 1 default profile: "default"
2025-08-20 12:16:41 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-08-20 12:16:41 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-08-20 12:16:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-08-20 12:16:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 89 ms. Found 21 JPA repository interfaces.
2025-08-20 12:16:43 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - 🔧 Registering custom error pages for Face Attendance System
2025-08-20 12:16:43 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - ✅ Error pages registered successfully
2025-08-20 12:16:43 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-08-20 12:16:43 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-08-20 12:16:43 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-08-20 12:16:43 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-08-20 12:16:43 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-08-20 12:16:43 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2271 ms
2025-08-20 12:16:43 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-08-20 12:16:43 [restartedMain] DEBUG o.s.w.s.r.ResourceUrlEncodingFilter - Filter 'resourceUrlEncodingFilter' configured for use
2025-08-20 12:16:43 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-20 12:16:43 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.11.Final
2025-08-20 12:16:43 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-08-20 12:16:44 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-08-20 12:16:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-08-20 12:16:44 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@24c1a6ce
2025-08-20 12:16:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-08-20 12:16:44 [restartedMain] WARN  org.hibernate.dialect.Dialect - HHH000511: The 5.5.5 version for [org.hibernate.dialect.MySQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 8.0.0. Check the community dialects project for available legacy versions.
2025-08-20 12:16:44 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-20 12:16:44 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 5.5.5
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-08-20 12:16:45 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-20 12:16:45 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table sinhvien 
       modify column ma_sv varchar(20) not null
2025-08-20 12:16:46 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table sinhvien 
       modify column ma_sv varchar(20) not null" via JDBC [Cannot change column 'ma_sv': used in a foreign key constraint 'FK2gqolxaphl30pjr7l2dbs8x8w' of table 'face_attendance_legacy.taikhoan']
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table sinhvien 
       modify column ma_sv varchar(20) not null" via JDBC [Cannot change column 'ma_sv': used in a foreign key constraint 'FK2gqolxaphl30pjr7l2dbs8x8w' of table 'face_attendance_legacy.taikhoan']
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tathanhloc.faceattendance.FaceAttendanceApplication.main(FaceAttendanceApplication.java:22)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: java.sql.SQLException: Cannot change column 'ma_sv': used in a foreign key constraint 'FK2gqolxaphl30pjr7l2dbs8x8w' of table 'face_attendance_legacy.taikhoan'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 40 common frames omitted
2025-08-20 12:16:46 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table sinhvien 
       modify column embedding varchar(255)
2025-08-20 12:16:46 [restartedMain] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table sinhvien 
       modify column embedding varchar(255)" via JDBC [Data truncation: Data too long for column 'embedding' at row 1]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table sinhvien 
       modify column embedding varchar(255)" via JDBC [Data truncation: Data too long for column 'embedding' at row 1]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1859)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1808)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:601)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:347)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.tathanhloc.faceattendance.FaceAttendanceApplication.main(FaceAttendanceApplication.java:22)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:565)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'embedding' at row 1
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:96)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:837)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:685)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 40 common frames omitted
2025-08-20 12:16:46 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-08-20 12:16:46 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-08-20 12:16:50 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-08-20 12:16:50 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-08-20 12:16:51 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-20 12:16:51 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 362 mappings in 'requestMappingHandlerMapping'
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.S.PythonFeatureExtractionService - Python wrapper script created: .\extract_wrapper.py
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.S.PythonFeatureExtractionService - Bash script created: .\run_extraction.sh
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.S.PythonFeatureExtractionService - Python scripts initialized successfully at: .
2025-08-20 12:16:51 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /admin-ws/**] in 'stompWebSocketHandlerMapping'
2025-08-20 12:16:51 [restartedMain] INFO  o.s.b.a.w.s.WelcomePageHandlerMapping - Adding welcome page template: index
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - 🔧 Configuring view controllers
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - ✅ View controllers configured successfully
2025-08-20 12:16:51 [restartedMain] DEBUG o.s.w.s.c.a.WebMvcConfigurer - Default resource handling disabled
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - 🔧 Configuring static resource handlers
2025-08-20 12:16:51 [restartedMain] INFO  c.t.f.Config.ErrorPageConfig - ✅ Static resource handlers configured successfully
2025-08-20 12:16:51 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - 🔧 Configuring static resource handlers
2025-08-20 12:16:51 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - ✅ Added SRC streams handler: file:///D:/LuanVan/face-attendance/src/main/resources/static/streams
2025-08-20 12:16:51 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - ✅ Added CLASSPATH streams handler
2025-08-20 12:16:51 [restartedMain] INFO  c.t.faceattendance.Config.WebConfig - ✅ All resource handlers configured successfully
2025-08-20 12:16:51 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/static/**, /css/**, /js/**, /images/**, /favicon.ico, /streams/**, /uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-08-20 12:16:52 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, UsernamePasswordAuthenticationFilter, ConcurrentSessionFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.AdminDashboardController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.AttendanceReportController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.AuthController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.CameraController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.CustomErrorController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.DangKyHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.DiemDanhController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.ErrorPageController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.FlaskIntegrationController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.GiangVienController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.HocKyController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.HocKyNamHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.HomeController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.KhoaController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.KhoaHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LecturerApiController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LecturerDashboardController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LichHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LopController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.LopHocPhanController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.MonHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.NamHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.NganhController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.NganhMonHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.PhongHocController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.PythonApiController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.PythonFeatureExtractionController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.RealtimeController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.ROIController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.SinhVienController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StreamController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StreamPageController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StudentAttendanceController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.StudentDashboardController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.SwaggerController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.SystemLogController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.TaiKhoanController:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.t.f.C.WebSocketController:
	{[MESSAGE],[/roi-update]}: handleROIUpdate(ROIUpdateEventDTO)
	{[MESSAGE],[/camera-status]}: handleCameraStatus(CameraStatusEventDTO)
	{[MESSAGE],[/attendance-update]}: handleAttendanceUpdate(DiemDanhDTO)
	{[MESSAGE],[/face-detection]}: handleFaceDetection(FaceDetectionDTO)
	{[MESSAGE],[/system-status]}: handleSystemStatusRequest()
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-08-20 12:16:52 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2025-08-20 12:16:53 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-08-20 12:16:53 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-08-20 12:16:53 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-08-20 12:16:53 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-08-20 12:16:53 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@731d7a24]
2025-08-20 12:16:53 [restartedMain] DEBUG org.springframework.web.SimpLogging - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@731d7a24]
2025-08-20 12:16:53 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@731d7a24]]
2025-08-20 12:16:53 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-08-20 12:16:53 [restartedMain] DEBUG org.springframework.web.SimpLogging - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:16:53 [restartedMain] DEBUG org.springframework.web.SimpLogging - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:16:53 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-08-20 12:16:53 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-08-20 12:16:53 [restartedMain] INFO  c.t.f.FaceAttendanceApplication - Started FaceAttendanceApplication in 12.898 seconds (process running for 13.838)
2025-08-20 12:16:53 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        tk1_0.id,
        tk1_0.created_at,
        tk1_0.ma_gv,
        tk1_0.is_active,
        tk1_0.password_hash,
        tk1_0.ma_sv,
        tk1_0.username,
        tk1_0.vai_tro 
    from
        taikhoan tk1_0 
    where
        tk1_0.username=?
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@10a48be6
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7281b4da
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-08-20 12:16:54 [RMI TCP Connection(1)-172.16.71.31] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.HomeController#index(Authentication, String, String, Model)
2025-08-20 12:16:56 [http-nio-8080-exec-1] INFO  c.t.f.Controller.HomeController - === HOME PAGE ACCESS ===
2025-08-20 12:16:56 [http-nio-8080-exec-1] INFO  c.t.f.Controller.HomeController - Authentication present: false
2025-08-20 12:16:56 [http-nio-8080-exec-1] INFO  c.t.f.Controller.HomeController - Is authenticated: false
2025-08-20 12:16:56 [http-nio-8080-exec-1] INFO  c.t.f.Controller.HomeController - Showing login page
2025-08-20 12:16:56 [http-nio-8080-exec-1] INFO  o.s.s.a.AnnotationAsyncExecutionInterceptor - More than one TaskExecutor bean found within the context, and none is named 'taskExecutor'. Mark one of them as primary or name it 'taskExecutor' (possibly as an alias) in order to use it for async processing: [clientInboundChannelExecutor, clientOutboundChannelExecutor, brokerChannelExecutor, messageBrokerTaskScheduler]
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:16:56 [SimpleAsyncTaskExecutor-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:16:56 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.HomeController#index(Authentication, String, String, Model)
2025-08-20 12:16:56 [http-nio-8080-exec-3] INFO  c.t.f.Controller.HomeController - === HOME PAGE ACCESS ===
2025-08-20 12:16:56 [http-nio-8080-exec-3] INFO  c.t.f.Controller.HomeController - Authentication present: false
2025-08-20 12:16:56 [http-nio-8080-exec-3] INFO  c.t.f.Controller.HomeController - Is authenticated: false
2025-08-20 12:16:56 [http-nio-8080-exec-3] INFO  c.t.f.Controller.HomeController - Showing login page
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:16:56 [SimpleAsyncTaskExecutor-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:16:56 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:16:56 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:16:56 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:16:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:16:56 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/auth.css
2025-08-20 12:16:56 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/auth.css
2025-08-20 12:16:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/auth.css", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:16:56 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:16:56 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:16:56 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:16:56 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:16:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:16:56 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/auth.css
2025-08-20 12:16:56 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:16:56 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/auth.css
2025-08-20 12:16:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/auth.css", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:16:56 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /favicon.ico
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /favicon.ico
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/favicon.ico", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/]]
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.r.ResourceHttpRequestHandler - Resource not found
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource /favicon.ico.]
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 404 NOT_FOUND
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - "ERROR" dispatch for GET "/error", parameters={}
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.CustomErrorController#handleError(HttpServletRequest, Model)
2025-08-20 12:16:56 [http-nio-8080-exec-7] ERROR c.t.f.C.CustomErrorController - 🚨 Custom Error Handler - Status: 404 | Path: /favicon.ico | Message: No static resource /favicon.ico.
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG c.t.f.C.CustomErrorController - 🔍 Request Analysis: URI=/error, Accept=image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8, ContentType=null, IsAPI=false
2025-08-20 12:16:56 [http-nio-8080-exec-7] INFO  c.t.f.C.CustomErrorController - 🌐 Handling as Web request
2025-08-20 12:16:56 [http-nio-8080-exec-7] INFO  c.t.f.C.CustomErrorController - 🔍 404 Not Found - Redirecting to 404 page
2025-08-20 12:16:56 [SimpleAsyncTaskExecutor-3] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected '*/*' given [image/avif, image/webp, image/apng, image/svg+xml, image/*, */*;q=0.8]
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Exiting from "ERROR" dispatch, status 404
2025-08-20 12:16:56 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-08-20 12:17:03 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /login
2025-08-20 12:17:03 [http-nio-8080-exec-5] INFO  c.t.f.S.CustomUserDetailsService - Loading user by username: admin
2025-08-20 12:17:03 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        tk1_0.id,
        tk1_0.created_at,
        tk1_0.ma_gv,
        tk1_0.is_active,
        tk1_0.password_hash,
        tk1_0.ma_sv,
        tk1_0.username,
        tk1_0.vai_tro 
    from
        taikhoan tk1_0 
    where
        tk1_0.username=?
2025-08-20 12:17:03 [http-nio-8080-exec-5] INFO  c.t.f.S.CustomUserDetailsService - User found: admin with role: ADMIN and active status: true
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-4] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.s.c.session.SessionRegistryImpl - Registering session D17B46CE8A5CB4F962C83E8E75D53D42, for principal com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]] to HttpSession [org.apache.catalina.session.StandardSessionFacade@79b97896]
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.UsernamePasswordAuthenticationFilter - Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/dashboard
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/dashboard
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/dashboard", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#dashboard(Authentication, Model)
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - === ADMIN DASHBOARD ACCESS ===
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - Authentication: UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - Is Authenticated: true
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - ✅ Admin dashboard access granted for user: admin
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - User role: ADMIN
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        gv1_0.ma_khoa 
    from
        giangvien gv1_0
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        lop l1_0
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(dd1_0.id) 
    from
        diemdanh dd1_0 
    where
        dd1_0.ngay_diem_danh=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - Dashboard stats loaded - Students: 60, Lecturers: 6, Classes: 4, Attendance: 0
2025-08-20 12:17:04 [http-nio-8080-exec-9] INFO  c.t.f.C.AdminDashboardController - ✅ Admin dashboard loaded successfully
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-5] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:04 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:04 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/cameras
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/giangvien/count
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/sinhvien/count
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/logs/statistics
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/sinhvien/count
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/cameras
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/giangvien/count
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/sinhvien/count", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/cameras", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/giangvien/count", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/logs/statistics
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SinhVienController#getStudentCount()
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.GiangVienController#getTeacherCount()
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.CameraController#getAll()
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/logs/statistics", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SystemLogController#getLogStatistics()
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        sinhvien sv1_0
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        giangvien gv1_0
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        system_log sl1_0
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/logs/search?size=5&sortBy=createdAt&sortDir=desc
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ip_address,
        c1_0.is_active,
        c1_0.ma_phong,
        c1_0.password,
        c1_0.ten_camera,
        c1_0.vung_in,
        c1_0.vung_out 
    from
        camera c1_0
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/logs/recent-errors?limit=5
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/logs/search?size=5&sortBy=createdAt&sortDir=desc
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/logs/recent-errors?limit=5
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/logs/recent-errors?limit=5", parameters={masked}
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/logs/search?size=5&sortBy=createdAt&sortDir=desc", parameters={masked}
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SystemLogController#getRecentErrors(int)
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SystemLogController#searchLogs(String, LogLevel, String, String, LocalDateTime, LocalDateTime, String, int, int, String, String)
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-7] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-6] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=6, status=success}]
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{count=60, status=success}]
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[CameraDTO(id=6, tenCamera=A501, ipAddress=rtsp://admin:24082003Tl@192.168.101.217:554/ch1/main, maP (truncated)...]
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        sl1_0.id,
        sl1_0.action,
        sl1_0.created_at,
        sl1_0.duration_ms,
        sl1_0.entity_id,
        sl1_0.entity_type,
        sl1_0.error_details,
        sl1_0.ip_address,
        sl1_0.log_level,
        sl1_0.message,
        sl1_0.module,
        sl1_0.new_value,
        sl1_0.old_value,
        sl1_0.request_method,
        sl1_0.request_url,
        sl1_0.session_id,
        sl1_0.status,
        sl1_0.user_agent,
        sl1_0.user_id,
        sl1_0.user_name 
    from
        system_log sl1_0 
    where
        sl1_0.log_level in ('ERROR', 'FATAL') 
    order by
        sl1_0.created_at desc 
    limit
        ?
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.log_level in ('ERROR', 'FATAL') 
        and sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.log_level in ('ERROR', 'FATAL') 
        and sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sl1_0.log_level,
        count(sl1_0.id) 
    from
        system_log sl1_0 
    group by
        sl1_0.log_level
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[SystemLogDTO(id=116, logLevel=ERROR, module=API, action=GiangVienController.getById, message=API ca (truncated)...]
2025-08-20 12:17:04 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        sl1_0.id,
        sl1_0.action,
        sl1_0.created_at,
        sl1_0.duration_ms,
        sl1_0.entity_id,
        sl1_0.entity_type,
        sl1_0.error_details,
        sl1_0.ip_address,
        sl1_0.log_level,
        sl1_0.message,
        sl1_0.module,
        sl1_0.new_value,
        sl1_0.old_value,
        sl1_0.request_method,
        sl1_0.request_url,
        sl1_0.session_id,
        sl1_0.status,
        sl1_0.user_agent,
        sl1_0.user_id,
        sl1_0.user_name 
    from
        system_log sl1_0 
    where
        (
            ? is null 
            or sl1_0.module=?
        ) 
        and (
            ? is null 
            or sl1_0.log_level=?
        ) 
        and (
            ? is null 
            or sl1_0.status=?
        ) 
        and (
            ? is null 
            or sl1_0.user_id=?
        ) 
        and (
            ? is null 
            or sl1_0.created_at>=?
        ) 
        and (
            ? is null 
            or sl1_0.created_at<=?
        ) 
        and (
            ? is null 
            or lower(sl1_0.message) like replace(lower(concat('%', ?, '%')), '\\', '\\\\') 
            or lower(sl1_0.action) like replace(lower(concat('%', ?, '%')), '\\', '\\\\')
        ) 
    order by
        sl1_0.created_at desc 
    limit
        ?
2025-08-20 12:17:04 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sl1_0.module,
        count(sl1_0.id) 
    from
        system_log sl1_0 
    group by
        sl1_0.module 
    order by
        count(sl1_0.id) desc
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        (
            ? is null 
            or sl1_0.module=?
        ) 
        and (
            ? is null 
            or sl1_0.log_level=?
        ) 
        and (
            ? is null 
            or sl1_0.status=?
        ) 
        and (
            ? is null 
            or sl1_0.user_id=?
        ) 
        and (
            ? is null 
            or sl1_0.created_at>=?
        ) 
        and (
            ? is null 
            or sl1_0.created_at<=?
        ) 
        and (
            ? is null 
            or lower(sl1_0.message) like replace(lower(concat('%', ?, '%')), '\\', '\\\\') 
            or lower(sl1_0.action) like replace(lower(concat('%', ?, '%')), '\\', '\\\\')
        )
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sl1_0.status,
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.status is not null 
    group by
        sl1_0.status
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{totalLogs=10090, errorsLast24h=0, statusStats={SUCCESS=10057, FAILED=35, WARNING=2}, logLevelCounts (truncated)...]
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-10] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/logs/statistics
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/logs/statistics
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/logs/statistics", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SystemLogController#getLogStatistics()
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        system_log sl1_0
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.created_at>=?
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-11] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-9] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [Page 1 of 2019 containing com.tathanhloc.faceattendance.DTO.SystemLogDTO instances]
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.log_level in ('ERROR', 'FATAL') 
        and sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:04 [http-nio-8080-exec-3] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.log_level in ('ERROR', 'FATAL') 
        and sl1_0.created_at>=?
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        sl1_0.log_level,
        count(sl1_0.id) 
    from
        system_log sl1_0 
    group by
        sl1_0.log_level
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-12] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:04 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:04 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        sl1_0.module,
        count(sl1_0.id) 
    from
        system_log sl1_0 
    group by
        sl1_0.module 
    order by
        count(sl1_0.id) desc
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        sl1_0.status,
        count(sl1_0.id) 
    from
        system_log sl1_0 
    where
        sl1_0.status is not null 
    group by
        sl1_0.status
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{totalLogs=10095, errorsLast24h=0, statusStats={SUCCESS=10060, FAILED=35, WARNING=2}, logLevelCounts (truncated)...]
2025-08-20 12:17:04 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:04 [SimpleAsyncTaskExecutor-13] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/khoa
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/khoa
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/khoa", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#khoaManagement(Authentication, Model)
2025-08-20 12:17:06 [http-nio-8080-exec-6] INFO  c.t.f.C.AdminDashboardController - Admin khoa management access: admin
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-14] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoa
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoa
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoa", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaController#getAll()
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaDTO(maKhoa=CNTT, tenKhoa=Công Nghệ Thông Tin, isActive=false), KhoaDTO(maKhoa=HTTT, tenKhoa=Hệ  (truncated)...]
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-15] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:06 [http-nio-8080-exec-9] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-16] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/nganh
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/nganh
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/nganh", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#nganhManagement(Authentication, Model)
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-17] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:06 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:06 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/nganh/all
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoa
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/nganh/all?page=0&size=10
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/nganh/all
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/nganh/all?page=0&size=10
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoa
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoa", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/nganh/all", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/nganh/all?page=0&size=10", parameters={masked}
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NganhController#getAll()
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NganhController#getAll()
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaController#getAll()
2025-08-20 12:17:06 [http-nio-8080-exec-10] INFO  c.t.f.Controller.NganhController - Lấy tất cả ngành (bao gồm đã xóa)
2025-08-20 12:17:06 [http-nio-8080-exec-5] INFO  c.t.f.Controller.NganhController - Lấy tất cả ngành (bao gồm đã xóa)
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh 
    from
        nganh n1_0
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh 
    from
        nganh n1_0
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaDTO(maKhoa=CNTT, tenKhoa=Công Nghệ Thông Tin, isActive=false), KhoaDTO(maKhoa=HTTT, tenKhoa=Hệ  (truncated)...]
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-18] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-20] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-19] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NganhDTO(maNganh=CNTT, tenNganh=Công Nghệ Thông Tin, maKhoa=TTTT, tenKhoa=Thông tin và Truyền thông (truncated)...]
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NganhDTO(maNganh=CNTT, tenNganh=Công Nghệ Thông Tin, maKhoa=TTTT, tenKhoa=Thông tin và Truyền thông (truncated)...]
2025-08-20 12:17:06 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:06 [http-nio-8080-exec-9] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:06 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:06 [SimpleAsyncTaskExecutor-21] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/monhoc
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/monhoc
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/monhoc", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#monhocManagement(Authentication, Model)
2025-08-20 12:17:07 [SimpleAsyncTaskExecutor-22] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:07 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:07 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:07 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:07 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:07 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:07 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/nganh
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoa
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/nganh
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoa
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/nganh", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoa", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NganhController#getAllActive()
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaController#getAll()
2025-08-20 12:17:07 [http-nio-8080-exec-5] INFO  c.t.f.Controller.NganhController - Lấy danh sách ngành đang hoạt động
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG c.t.f.Service.NganhService - Lấy danh sách ngành đang hoạt động từ database
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh 
    from
        nganh n1_0
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaDTO(maKhoa=CNTT, tenKhoa=Công Nghệ Thông Tin, isActive=false), KhoaDTO(maKhoa=HTTT, tenKhoa=Hệ  (truncated)...]
2025-08-20 12:17:07 [SimpleAsyncTaskExecutor-23] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:07 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    where
        l1_0.ma_nganh=? 
        and sv1_0.is_active=1 
        and l1_0.is_active=1
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NganhDTO(maNganh=CNTT, tenNganh=Công Nghệ Thông Tin, maKhoa=TTTT, tenKhoa=Thông tin và Truyền thông (truncated)...]
2025-08-20 12:17:07 [SimpleAsyncTaskExecutor-24] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:07 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/monhoc
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/monhoc
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/monhoc", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.MonHocController#getAll()
2025-08-20 12:17:07 [http-nio-8080-exec-10] INFO  c.t.f.Controller.MonHocController - Lấy danh sách tất cả môn học
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG c.t.f.Service.MonHocService - Getting all MonHoc
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh 
    from
        monhoc mh1_0
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MonHocDTO(maMh=COMP101, tenMh=Nhập môn lập trình, soTinChi=3, isActive=true, maNganhs=[CNTT, HTTT]) (truncated)...]
2025-08-20 12:17:07 [SimpleAsyncTaskExecutor-25] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:07 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:07 [http-nio-8080-exec-9] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:07 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:07 [SimpleAsyncTaskExecutor-26] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/monhoc
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/monhoc
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/monhoc", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#monhocManagement(Authentication, Model)
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-27] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/nganh
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoa
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoa
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/nganh
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/nganh", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoa", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NganhController#getAllActive()
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaController#getAll()
2025-08-20 12:17:08 [http-nio-8080-exec-5] INFO  c.t.f.Controller.NganhController - Lấy danh sách ngành đang hoạt động
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NganhDTO(maNganh=CNTT, tenNganh=Công Nghệ Thông Tin, maKhoa=TTTT, tenKhoa=Thông tin và Truyền thông (truncated)...]
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-28] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaDTO(maKhoa=CNTT, tenKhoa=Công Nghệ Thông Tin, isActive=false), KhoaDTO(maKhoa=HTTT, tenKhoa=Hệ  (truncated)...]
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-29] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/monhoc
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/monhoc
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/monhoc", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.MonHocController#getAll()
2025-08-20 12:17:08 [http-nio-8080-exec-10] INFO  c.t.f.Controller.MonHocController - Lấy danh sách tất cả môn học
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG c.t.f.Service.MonHocService - Getting all MonHoc
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh 
    from
        monhoc mh1_0
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MonHocDTO(maMh=COMP101, tenMh=Nhập môn lập trình, soTinChi=3, isActive=true, maNganhs=[CNTT, HTTT]) (truncated)...]
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-30] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:08 [http-nio-8080-exec-9] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-31] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/lop
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/lop
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/lop", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#lopManagement(Authentication, Model)
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-32] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoa
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/nganh
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoahoc
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoa
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoahoc
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/nganh
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoa", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoahoc", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/nganh", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaController#getAll()
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NganhController#getAllActive()
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaHocController#getAll()
2025-08-20 12:17:08 [http-nio-8080-exec-4] INFO  c.t.f.Controller.NganhController - Lấy danh sách ngành đang hoạt động
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NganhDTO(maNganh=CNTT, tenNganh=Công Nghệ Thông Tin, maKhoa=TTTT, tenKhoa=Thông tin và Truyền thông (truncated)...]
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-33] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc 
    from
        khoahoc kh1_0
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaDTO(maKhoa=CNTT, tenKhoa=Công Nghệ Thông Tin, isActive=false), KhoaDTO(maKhoa=HTTT, tenKhoa=Hệ  (truncated)...]
2025-08-20 12:17:08 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-34] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaHocDTO(maKhoahoc=K20, tenKhoahoc=Khóa 20, namBatDau=2020, namKetThuc=2024, isActive=null), Khoa (truncated)...]
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-35] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lop/all
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/sinhvien/count/active
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lop/all
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/sinhvien/count/active
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/sinhvien/count/active", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lop/all", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SinhVienController#countActiveSinhVien()
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LopController#getAll()
2025-08-20 12:17:08 [http-nio-8080-exec-3] INFO  c.t.f.Controller.SinhVienController - Đếm tổng số sinh viên đang hoạt động
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        l1_0.ma_khoahoc,
        l1_0.ma_khoa,
        l1_0.ma_nganh,
        l1_0.ten_lop 
    from
        lop l1_0
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        count(sv1_0.ma_sv) 
    from
        sinhvien sv1_0 
    where
        sv1_0.is_active
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc 
    from
        khoahoc kh1_0 
    where
        kh1_0.ma_khoahoc=?
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [56]
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:08 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-36] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh 
    from
        nganh n1_0 
    where
        n1_0.ma_nganh=?
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh 
    from
        nganh n1_0 
    where
        n1_0.ma_nganh=?
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[LopDTO(maLop=21DTHC1, tenLop=Đại Trà Hệ Chính Quy 1, maNganh=CNTT, maKhoahoc=K21, maKhoa=null, isAc (truncated)...]
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-37] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:08 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:08 [http-nio-8080-exec-7] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:08 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:08 [SimpleAsyncTaskExecutor-38] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/lophocphan
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/lophocphan
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/lophocphan", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#lophocphanManagement(Authentication, Model)
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-39] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:11 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:11 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:11 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:11 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:11 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:11 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/monhoc
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lophocphan
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/giangvien
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/hocky
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/sinhvien/all
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/namhoc
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/monhoc
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/giangvien
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/hocky
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lophocphan
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/monhoc", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/hocky", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lophocphan", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/giangvien", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.MonHocController#getAll()
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LopHocPhanController#getAll()
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.HocKyController#getAll()
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.GiangVienController#getAll(String, String, String)
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/sinhvien/all
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/namhoc
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/sinhvien/all", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/namhoc", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-3] INFO  c.t.f.Controller.MonHocController - Lấy danh sách tất cả môn học
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.SinhVienController#getAllStudentsNoPagination()
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NamHocController#getAll()
2025-08-20 12:17:11 [http-nio-8080-exec-7] INFO  c.t.f.Controller.HocKyController - Lấy danh sách tất cả học kỳ
2025-08-20 12:17:11 [http-nio-8080-exec-1] INFO  c.t.f.Controller.SinhVienController - Lấy tất cả sinh viên (không phân trang)
2025-08-20 12:17:11 [http-nio-8080-exec-10] INFO  c.t.f.Service.LopHocPhanService - Getting all LopHocPhan with full names
2025-08-20 12:17:11 [http-nio-8080-exec-2] INFO  c.t.f.Controller.NamHocController - Lấy danh sách tất cả năm học
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG c.t.f.Service.MonHocService - Getting all MonHoc
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh 
    from
        monhoc mh1_0
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        gv1_0.ma_khoa 
    from
        giangvien gv1_0
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        nh1_0.ma_nam_hoc,
        nh1_0.is_active,
        nh1_0.is_current,
        nh1_0.mo_ta,
        nh1_0.ngay_bat_dau,
        nh1_0.ngay_ket_thuc,
        nh1_0.ten_nam_hoc 
    from
        nam_hoc nh1_0
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        lhp1_0.ma_gv,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        lhp1_0.ma_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        hk1_0.ma_hoc_ky,
        hk1_0.is_active,
        hk1_0.is_current,
        hk1_0.mo_ta,
        hk1_0.ngay_bat_dau,
        hk1_0.ngay_ket_thuc,
        hk1_0.ten_hoc_ky 
    from
        hoc_ky hk1_0
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        giangvien gv1_0 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    where
        gv1_0.ma_gv=?
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh 
    from
        monhoc mh1_0 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[GiangVienDTO(maGv=GV001, hoTen=Nguyễn Văn A, email=gv001@university.edu.vn, isActive=false, maKhoa= (truncated)...]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-40] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-41] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-42] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_lhp,
        sv1_1.ma_sv,
        sv1_1.email,
        sv1_1.embedding,
        sv1_1.gioi_tinh,
        sv1_1.hinh_anh,
        sv1_1.ho_ten,
        sv1_1.is_active,
        sv1_1.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_1.ngay_sinh 
    from
        lhp_sinhvien sv1_0 
    join
        sinhvien sv1_1 
            on sv1_1.ma_sv=sv1_0.ma_sv 
    left join
        lop l1_0 
            on l1_0.ma_lop=sv1_1.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_lhp=?
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[HocKyDTO(maHocKy=2025-2026_HK1, tenHocKy=Học kỳ 1 - Năm học 2025 - 2026, ngayBatDau=2025-07-08, nga (truncated)...]
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NamHocDTO(maNamHoc=2025-2026, tenNamHoc=Năm học 2025 - 2026, ngayBatDau=2025-08-10, ngayKetThuc=202 (truncated)...]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_lhp,
        sv1_1.ma_sv,
        sv1_1.email,
        sv1_1.embedding,
        sv1_1.gioi_tinh,
        sv1_1.hinh_anh,
        sv1_1.ho_ten,
        sv1_1.is_active,
        sv1_1.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_1.ngay_sinh 
    from
        lhp_sinhvien sv1_0 
    join
        sinhvien sv1_1 
            on sv1_1.ma_sv=sv1_0.ma_sv 
    left join
        lop l1_0 
            on l1_0.ma_lop=sv1_1.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_lhp=?
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-43] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[LopHocPhanDTO(maLhp=G09412_01, hocKy=2025-2026_HK1, namHoc=2025-2026, nhom=1, isActive=true, maMh=C (truncated)...]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:11 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MonHocDTO(maMh=COMP101, tenMh=Nhập môn lập trình, soTinChi=3, isActive=true, maNganhs=[CNTT, HTTT]) (truncated)...]
2025-08-20 12:17:11 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-44] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop 
    from
        lop l1_0 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        l1_0.ma_lop=?
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-45] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[SinhVienDTO(maSv=21072004080, hoTen=Lưu Thành Lượng, gioiTinh=NAM, ngaySinh=2003-10-02, email=21072 (truncated)...]
2025-08-20 12:17:11 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:11 [http-nio-8080-exec-6] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:11 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:11 [SimpleAsyncTaskExecutor-46] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /admin/lichhoc
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /admin/lichhoc
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/admin/lichhoc", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AdminDashboardController#lichhocManagement(Authentication, Model)
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-47] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.v.ContentNegotiatingViewResolver - Selected 'text/html' given [text/html, application/xhtml+xml, image/avif, image/webp, image/apng, application/xml;q=0.9, */*;q=0.8, application/signed-exchange;v=b3;q=0.7]
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/common.css
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/common.css
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/common.css", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/sidebar.css
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /css/admin.css
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/sidebar.css
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /css/admin.css
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/admin.css", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/css/sidebar.css", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/css/]]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/sidebar.js
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /js/common.js
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/sidebar.js
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /js/common.js
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/common.js", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/js/sidebar.js", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [static/js/]]
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lichhoc
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lophocphan
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/giangvien
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/phonghoc/all
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/hocky
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/namhoc
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/hocky
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/giangvien
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lophocphan
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/phonghoc/all
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lichhoc
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/giangvien", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/phonghoc/all", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/hocky", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lophocphan", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lichhoc", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.PhongHocController#getAllRooms()
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.HocKyController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LopHocPhanController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.GiangVienController#getAll(String, String, String)
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/namhoc
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/namhoc", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.NamHocController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-3] INFO  c.t.f.Service.LopHocPhanService - Getting all LopHocPhan with full names
2025-08-20 12:17:12 [http-nio-8080-exec-4] INFO  c.t.f.Controller.HocKyController - Lấy danh sách tất cả học kỳ
2025-08-20 12:17:12 [http-nio-8080-exec-5] INFO  c.t.f.Controller.NamHocController - Lấy danh sách tất cả năm học
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        nh1_0.ma_nam_hoc,
        nh1_0.is_active,
        nh1_0.is_current,
        nh1_0.mo_ta,
        nh1_0.ngay_bat_dau,
        nh1_0.ngay_ket_thuc,
        nh1_0.ten_nam_hoc 
    from
        nam_hoc nh1_0
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        hk1_0.ma_hoc_ky,
        hk1_0.is_active,
        hk1_0.is_current,
        hk1_0.mo_ta,
        hk1_0.ngay_bat_dau,
        hk1_0.ngay_ket_thuc,
        hk1_0.ten_hoc_ky 
    from
        hoc_ky hk1_0
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        lhp1_0.ma_gv,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        lhp1_0.ma_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.is_active
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        gv1_0.ma_khoa 
    from
        giangvien gv1_0
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        giangvien gv1_0 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    where
        gv1_0.ma_gv=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh 
    from
        monhoc mh1_0 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[NamHocDTO(maNamHoc=2025-2026, tenNamHoc=Năm học 2025 - 2026, ngayBatDau=2025-08-10, ngayKetThuc=202 (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[HocKyDTO(maHocKy=2025-2026_HK1, tenHocKy=Học kỳ 1 - Năm học 2025 - 2026, ngayBatDau=2025-07-08, nga (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_lhp,
        sv1_1.ma_sv,
        sv1_1.email,
        sv1_1.embedding,
        sv1_1.gioi_tinh,
        sv1_1.hinh_anh,
        sv1_1.ho_ten,
        sv1_1.is_active,
        sv1_1.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_1.ngay_sinh 
    from
        lhp_sinhvien sv1_0 
    join
        sinhvien sv1_1 
            on sv1_1.ma_sv=sv1_0.ma_sv 
    left join
        lop l1_0 
            on l1_0.ma_lop=sv1_1.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_lhp=?
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-48] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-49] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[GiangVienDTO(maGv=GV001, hoTen=Nguyễn Văn A, email=gv001@university.edu.vn, isActive=false, maKhoa= (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/monhoc
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/khoa
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_lhp,
        sv1_1.ma_sv,
        sv1_1.email,
        sv1_1.embedding,
        sv1_1.gioi_tinh,
        sv1_1.hinh_anh,
        sv1_1.ho_ten,
        sv1_1.is_active,
        sv1_1.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_1.ngay_sinh 
    from
        lhp_sinhvien sv1_0 
    join
        sinhvien sv1_1 
            on sv1_1.ma_sv=sv1_0.ma_sv 
    left join
        lop l1_0 
            on l1_0.ma_lop=sv1_1.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-50] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/khoa
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/monhoc
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/khoa", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/monhoc", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.KhoaController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.MonHocController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[PhongHocDTO(maPhong=A201, tenPhong=Phòng học A201, loaiPhong=LECTURE, sucChua=60, toaNha=Tòa A, tan (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-9] INFO  c.t.f.Controller.MonHocController - Lấy danh sách tất cả môn học
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG c.t.f.Service.MonHocService - Getting all MonHoc
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-51] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh 
    from
        monhoc mh1_0
2025-08-20 12:17:12 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[LopHocPhanDTO(maLhp=G09412_01, hocKy=2025-2026_HK1, namHoc=2025-2026, nhom=1, isActive=true, maMh=C (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-52] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-53] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=12, soTiet=2, maLhp=G09412_01, maPhong=A507 (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [[KhoaDTO(maKhoa=CNTT, tenKhoa=Công Nghệ Thông Tin, isActive=false), KhoaDTO(maKhoa=HTTT, tenKhoa=Hệ  (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-54] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lophocphan/G09412_01/sinhvien
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lophocphan/G09412_01/sinhvien
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lophocphan/G09412_01/sinhvien", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LopHocPhanController#getStudentsByLhp(String)
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        dkh1_0.ma_lhp,
        dkh1_0.ma_sv,
        dkh1_0.is_active 
    from
        lhp_sinhvien dkh1_0 
    left join
        lophocphan lhp1_0 
            on lhp1_0.ma_lhp=dkh1_0.ma_lhp 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        nmh1_0.ma_mh,
        nmh1_0.ma_nganh,
        nmh1_0.is_active 
    from
        nganh_monhoc nmh1_0 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=nmh1_0.ma_mh 
    where
        mh1_0.ma_mh=?
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MonHocDTO(maMh=COMP101, tenMh=Nhập môn lập trình, soTinChi=3, isActive=true, maNganhs=[CNTT, HTTT]) (truncated)...]
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-55] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-56] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[SinhVienDTO(maSv=21072004080, hoTen=Lưu Thành Lượng, gioiTinh=NAM, ngaySinh=2003-10-02, email=21072 (truncated)...]
2025-08-20 12:17:12 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/auth/me
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/auth/me
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/auth/me", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.AuthController#getCurrentUser(CustomUserDetails)
2025-08-20 12:17:12 [http-nio-8080-exec-7] INFO  c.t.f.Controller.AuthController - Current user info requested: admin
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [UserProfileDTO(id=1, username=admin, vaiTro=ADMIN, isActive=true, hoTen=null, maSo=null, email=null)]
2025-08-20 12:17:12 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lophocphan/G09412_02/sinhvien
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-57] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lophocphan/G09412_02/sinhvien
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lophocphan/G09412_02/sinhvien", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LopHocPhanController#getStudentsByLhp(String)
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        dkh1_0.ma_lhp,
        dkh1_0.ma_sv,
        dkh1_0.is_active 
    from
        lhp_sinhvien dkh1_0 
    left join
        lophocphan lhp1_0 
            on lhp1_0.ma_lhp=dkh1_0.ma_lhp 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[SinhVienDTO(maSv=21072006076, hoTen=Phạm Trí Đại, gioiTinh=NAM, ngaySinh=2003-09-19, email=21072006 (truncated)...]
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-58] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/dangkyhoc
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/dangkyhoc
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/dangkyhoc", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.DangKyHocController#getAll()
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        dkh1_0.ma_lhp,
        dkh1_0.ma_sv,
        dkh1_0.is_active 
    from
        lhp_sinhvien dkh1_0
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        sv1_0.ma_sv,
        sv1_0.email,
        sv1_0.embedding,
        sv1_0.gioi_tinh,
        sv1_0.hinh_anh,
        sv1_0.ho_ten,
        sv1_0.is_active,
        sv1_0.ma_lop,
        l1_0.ma_lop,
        l1_0.is_active,
        kh1_0.ma_khoahoc,
        kh1_0.nam_bat_dau,
        kh1_0.nam_ket_thuc,
        kh1_0.ten_khoahoc,
        mk1_0.ma_khoa,
        mk1_0.is_active,
        mk1_0.ten_khoa,
        n1_0.ma_nganh,
        n1_0.is_active,
        n1_0.ma_khoa,
        n1_0.ten_nganh,
        l1_0.ten_lop,
        sv1_0.ngay_sinh 
    from
        sinhvien sv1_0 
    join
        lop l1_0 
            on l1_0.ma_lop=sv1_0.ma_lop 
    left join
        khoahoc kh1_0 
            on kh1_0.ma_khoahoc=l1_0.ma_khoahoc 
    left join
        khoa mk1_0 
            on mk1_0.ma_khoa=l1_0.ma_khoa 
    left join
        nganh n1_0 
            on n1_0.ma_nganh=l1_0.ma_nganh 
    where
        sv1_0.ma_sv=?
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[DangKyHocDTO(maSv=21072004080, maLhp=G09412_01, isActive=true, tenMonHoc=null, tenGiangVien=null, t (truncated)...]
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-59] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lichhoc/current-semester
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lichhoc/current-semester
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lichhoc/current-semester", parameters={}
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#getCurrentSemesterSchedule()
2025-08-20 12:17:12 [http-nio-8080-exec-6] INFO  c.t.f.Controller.LichHocController - API: Lấy lịch học học kỳ hiện tại
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        hk1_0.ma_hoc_ky,
        hk1_0.is_active,
        hk1_0.is_current,
        hk1_0.mo_ta,
        hk1_0.ngay_bat_dau,
        hk1_0.ngay_ket_thuc,
        hk1_0.ten_hoc_ky 
    from
        hoc_ky hk1_0 
    where
        hk1_0.is_current
2025-08-20 12:17:12 [http-nio-8080-exec-6] INFO  c.t.f.Service.LichHocService - Getting schedule for semester: 2025-2026_HK1
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=12, soTiet=2, maLhp=G09412_01, maPhong=A507 (truncated)...]
2025-08-20 12:17:12 [SimpleAsyncTaskExecutor-60] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:12 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/lichhoc/check-conflicts
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/lichhoc/check-conflicts
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/lichhoc/check-conflicts", parameters={}
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#checkConflicts(LichHocDTO)
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LichHocDTO(maLich=null, thu=3, tietBatDau=6, soTiet=2, maLhp=G09412_01, maPhong=A507, isActive=null, (truncated)...]
2025-08-20 12:17:27 [http-nio-8080-exec-1] INFO  c.t.f.Controller.LichHocController - API: Kiểm tra trùng lịch cho LichHocDTO(maLich=null, thu=3, tietBatDau=6, soTiet=2, maLhp=G09412_01, maPhong=A507, isActive=null, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{conflictDetails=[], hasConflict=false, conflictCount=0}]
2025-08-20 12:17:27 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:27 [SimpleAsyncTaskExecutor-61] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/lichhoc/check-conflicts
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/lichhoc/check-conflicts
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/lichhoc/check-conflicts", parameters={}
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#checkConflicts(LichHocDTO)
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LichHocDTO(maLich=null, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=null, (truncated)...]
2025-08-20 12:17:29 [http-nio-8080-exec-3] INFO  c.t.f.Controller.LichHocController - API: Kiểm tra trùng lịch cho LichHocDTO(maLich=null, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=null, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{conflictDetails=[], hasConflict=false, conflictCount=0}]
2025-08-20 12:17:29 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:29 [SimpleAsyncTaskExecutor-62] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/lichhoc/LH1752009056467XZS
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/lichhoc/LH1752009056467XZS
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/lichhoc/LH1752009056467XZS", parameters={}
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#update(String, LichHocDTO)
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507,  (truncated)...]
2025-08-20 12:17:30 [http-nio-8080-exec-8] INFO  c.t.f.Service.LichHocService - Updating schedule with ID LH1752009056467XZS: LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=true, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        gv1_0.ma_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom,
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0 
    left join
        lophocphan lhp1_0 
            on lhp1_0.ma_lhp=lh1_0.ma_lhp 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    left join
        phonghoc ph1_0 
            on ph1_0.ma_phong=lh1_0.ma_phong 
    where
        lh1_0.ma_lich=?
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:30 [http-nio-8080-exec-8] INFO  c.t.f.Service.LichHocService - Checking conflicts for update - Schedule ID: LH1752009056467XZS, DTO: LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=true, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:30 [http-nio-8080-exec-8] INFO  c.t.f.Service.LichHocService - Conflict check result for update: hasConflict=false, conflicts=[]
2025-08-20 12:17:30 [SimpleAsyncTaskExecutor-63] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    update
        lichhoc 
    set
        created_at=?,
        is_active=?,
        ma_lhp=?,
        ma_phong=?,
        so_tiet=?,
        thu=?,
        tiet_bat_dau=?,
        updated_at=? 
    where
        ma_lich=?
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:30 [SimpleAsyncTaskExecutor-64] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong= (truncated)...]
2025-08-20 12:17:30 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lichhoc
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lichhoc
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lichhoc", parameters={}
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#getAll()
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[LichHocDTO(maLich=LH1752009056467XZS, thu=3, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, (truncated)...]
2025-08-20 12:17:30 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:30 [SimpleAsyncTaskExecutor-65] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/lichhoc/check-conflicts
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/lichhoc/check-conflicts
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/lichhoc/check-conflicts", parameters={}
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#checkConflicts(LichHocDTO)
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LichHocDTO(maLich=null, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=null, (truncated)...]
2025-08-20 12:17:34 [http-nio-8080-exec-9] INFO  c.t.f.Controller.LichHocController - API: Kiểm tra trùng lịch cho LichHocDTO(maLich=null, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=null, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{conflictDetails=[], hasConflict=false, conflictCount=0}]
2025-08-20 12:17:34 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:34 [SimpleAsyncTaskExecutor-66] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/lichhoc/LH1752009056467XZS
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/lichhoc/LH1752009056467XZS
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - PUT "/api/lichhoc/LH1752009056467XZS", parameters={}
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#update(String, LichHocDTO)
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [LichHocDTO(maLich=LH1752009056467XZS, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507,  (truncated)...]
2025-08-20 12:17:35 [http-nio-8080-exec-2] INFO  c.t.f.Service.LichHocService - Updating schedule with ID LH1752009056467XZS: LichHocDTO(maLich=LH1752009056467XZS, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=true, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        gv1_0.ma_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom,
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0 
    left join
        lophocphan lhp1_0 
            on lhp1_0.ma_lhp=lh1_0.ma_lhp 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    left join
        phonghoc ph1_0 
            on ph1_0.ma_phong=lh1_0.ma_phong 
    where
        lh1_0.ma_lich=?
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa 
    from
        khoa k1_0 
    where
        k1_0.ma_khoa=?
2025-08-20 12:17:35 [http-nio-8080-exec-2] INFO  c.t.f.Service.LichHocService - Checking conflicts for update - Schedule ID: LH1752009056467XZS, DTO: LichHocDTO(maLich=LH1752009056467XZS, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, isActive=true, updateAt=null, tenMonHoc=null, tenGiangVien=null, tenPhong=null, nhom=null, maMh=null, maGv=null, hocKy=null, namHoc=null, thoiGianBatDau=null, thoiGianKetThuc=null, tenThu=null)
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:35 [http-nio-8080-exec-2] INFO  c.t.f.Service.LichHocService - Conflict check result for update: hasConflict=false, conflicts=[]
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    update
        lichhoc 
    set
        created_at=?,
        is_active=?,
        ma_lhp=?,
        ma_phong=?,
        so_tiet=?,
        thu=?,
        tiet_bat_dau=?,
        updated_at=? 
    where
        ma_lich=?
2025-08-20 12:17:35 [SimpleAsyncTaskExecutor-67] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=LichHocDTO(maLich=LH1752009056467XZS, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong= (truncated)...]
2025-08-20 12:17:35 [SimpleAsyncTaskExecutor-68] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:35 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/lichhoc
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=com.tathanhloc.faceattendance.Security.CustomUserDetails@2500d8cb, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[ROLE_ADMIN]]]
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/lichhoc
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/lichhoc", parameters={}
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.tathanhloc.faceattendance.Controller.LichHocController#getAll()
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        lh1_0.ma_lich,
        lh1_0.created_at,
        lh1_0.is_active,
        lh1_0.ma_lhp,
        lh1_0.ma_phong,
        lh1_0.so_tiet,
        lh1_0.thu,
        lh1_0.tiet_bat_dau,
        lh1_0.updated_at 
    from
        lichhoc lh1_0
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        ph1_0.ma_phong,
        ph1_0.is_active,
        ph1_0.loai_phong,
        ph1_0.mo_ta,
        ph1_0.suc_chua,
        ph1_0.tang,
        ph1_0.ten_phong,
        ph1_0.thiet_bi,
        ph1_0.toa_nha,
        ph1_0.trang_thai,
        ph1_0.vi_tri 
    from
        phonghoc ph1_0 
    where
        ph1_0.ma_phong=?
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        lhp1_0.ma_lhp,
        gv1_0.ma_gv,
        gv1_0.email,
        gv1_0.ho_ten,
        gv1_0.is_active,
        k1_0.ma_khoa,
        k1_0.is_active,
        k1_0.ten_khoa,
        lhp1_0.hoc_ky,
        lhp1_0.is_active,
        mh1_0.ma_mh,
        mh1_0.is_active,
        mh1_0.so_tin_chi,
        mh1_0.ten_mh,
        lhp1_0.nam_hoc,
        lhp1_0.nhom 
    from
        lophocphan lhp1_0 
    left join
        giangvien gv1_0 
            on gv1_0.ma_gv=lhp1_0.ma_gv 
    left join
        khoa k1_0 
            on k1_0.ma_khoa=gv1_0.ma_khoa 
    left join
        monhoc mh1_0 
            on mh1_0.ma_mh=lhp1_0.ma_mh 
    where
        lhp1_0.ma_lhp=?
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/yaml]
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[LichHocDTO(maLich=LH1752009056467XZS, thu=4, tietBatDau=6, soTiet=3, maLhp=G09412_01, maPhong=A507, (truncated)...]
2025-08-20 12:17:35 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-08-20 12:17:35 [SimpleAsyncTaskExecutor-69] DEBUG org.hibernate.SQL - 
    insert 
    into
        system_log
        (action, created_at, duration_ms, entity_id, entity_type, error_details, ip_address, log_level, message, module, new_value, old_value, request_method, request_url, session_id, status, user_agent, user_id, user_name) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-08-20 12:17:53 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-08-20 12:21:50 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-08-20 12:21:50 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@731d7a24]]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@731d7a24]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@731d7a24]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-08-20 12:21:50 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] DEBUG org.springframework.web.SimpLogging - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-08-20 12:21:50 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
